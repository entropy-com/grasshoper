Object.defineProperty(exports,"__esModule",{value:!0}),require("ts-deepmerge");class e extends Error{constructor(e,t,r){super(e),this.request=t,this.config=t,this.response=r}}class t extends e{}function r(e,t,r,n,i,o,u){try{var s=e[o](u),c=s.value}catch(e){r(e);return}s.done?t(c):Promise.resolve(c).then(n,i)}function n(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var u=e.apply(t,n);function s(e){r(u,i,o,s,c,"next",e)}function c(e){r(u,i,o,s,c,"throw",e)}s(void 0)})}}exports.default=function(r={}){let{retryTimes:i,retryInterval:o,enableRetry:u}=r||{retryTimes:2,retryInterval:3e3};return function(r){return n(function*(s){let{retryTimes:c=i,retryInterval:f=o,enableRetry:a=u}=s,l=0;function y(){return d.apply(this,arguments)}function d(){return(d=n(function*(){try{return yield r(s)}catch(r){if(r instanceof e||r instanceof t){let e="GET"===s.method||s.isGet,t=typeof a,n="undefined"===t?e:"function"===t?a(s,r):!!a;if(c===l||!n)throw r;return f&&f>0&&l>0&&(yield new Promise(e=>{setTimeout(()=>{e("ok")},f)})),l++,y()}throw r}})).apply(this,arguments)}return y()})}};
